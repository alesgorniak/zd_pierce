<div class="container flex-1 py-6" id="page-container">
  <div class="row align-items-center">

    {{! Breadcrumbs }}
    <div class="col font-size-md font-medium">
      {{breadcrumbs}}
    </div>

    {{! Search }}
    {{~#is settings.header_search_style 'none'}}
      <div class="md:col-4">
        <div class="search mb-4">
          <h2 class="sr-only">{{t 'search' }}</h2>
          {{~#if settings.search_placeholder}}
            {{#if settings.use_translations}}
              {{search class='form-field mb-0' instant=settings.instant_search scoped=settings.scoped_kb_search submit=false placeholder=(dc settings.search_placeholder)}}
            {{else}}
              {{search class='form-field mb-0' instant=settings.instant_search scoped=settings.scoped_kb_search submit=false placeholder=settings.search_placeholder}}
            {{/if}}
          {{else}}
            {{search class='form-field mb-0' instant=settings.instant_search scoped=settings.scoped_kb_search submit=false}}
          {{/if~}}
          <svg class="search-icon fill-current transition" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" aria-hidden="true">
            <use xlink:href="#icon-search" />
          </svg>
        </div>
      </div>
    {{/is~}}

  </div>

  {{! Section header }}
  <div class="sm:flex flex-wrap justify-content-between">
    <h1 class="w-full lg:font-size-5xl">
      {{section.name}}
    </h1>
    {{#if section.description}}
      <p class="font-size-xl text-gray-600">
        {{section.description}}
      </p>
    {{/if}}
    {{#if settings.show_follow_section}}
      <div class="subscribe-section mb-4">
        {{subscribe}}
      </div>
    {{/if}}
  </div>

  <div class="row row-lg my-6">
    <div class="col mt-6">

      {{! Subsection list }}
      {{#if section.sections}}
        <ul class="list-unstyled list-bordered border-top border-bottom my-6">
          {{#each section.sections}}
            <li>
              <a class="flex py-4 align-items-center justify-content-between text-base hover:text-base" href="{{url}}">
                {{name}}
                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" focusable="false" viewBox="0 0 16 16" aria-hidden="true">
                  <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 14.5l6.1-6.1c.2-.2.2-.5 0-.7L5 1.5"/>
                </svg>
              </a>
            </li>
          {{/each}}
        </ul>
      {{/if}}

      {{pagination "section.sections"}}

      {{! Article list }}
      {{#if section.articles}}

        {{~#if section.sections}}
          <h2 class="mt-6 h3">
            {{t 'articles'}}
          </h2>
        {{/if~}}

        <div id="article-list-{{section.id}}">
          {{#if (compare settings.article_list_style '<=' '8')}}

          {{! Built-in article list }}
            <ul class="row row-{{~#is settings.article_list_style '1-bullet'}}flush list-disc{{else}}sm list-unstyled{{/is~}}">
              {{~#each section.articles}}
                <li class="col-12 text-primary
                  {{~#if (compare ../settings.article_list_columns ">=" "2")}} md:col-6{{/if~}}
                  {{~#if (compare ../settings.article_list_columns ">=" "3")}} lg:col-4{{/if~}}">

                  <div class="relative media align-items-baseline py-2 h-full lg:py-3
                    {{~#is ../settings.article_list_style '1-bullet'}} pr-7{{/is~}}
                    {{~#is ../settings.promoted_article_style 'bold'}}{{#if promoted}} font-bold{{/if}}{{/is~}}
                    {{~#isnt ../settings.article_list_excerpt 0}} font-semibold{{/isnt~}}
                    {{~#is ../settings.article_list_style '3-bordered'}} border-bottom{{#is ../settings.article_list_columns "1"}}{{#if @last}} border-bottom-0{{/if}}{{/is}}{{/is~}}">

                    {{~#is ../settings.article_list_style '3-bordered'}}
                      <div class="flex" x-data="{ src: Theme.assets['article'] }">
                        <template x-if="src">
                          <img class="svg-icon mr-3" src="{{asset 'placeholder.png'}}" alt="" aria-hidden="true" :src="src" />
                        </template>
                      </div>
                    {{/is~}}

                    <div class="media-body lg:font-size-lg">
                      <a class="link-stretched{{~#is ../settings.article_list_style '3-bordered'}} hover:no-underline{{/is}}" href="{{url}}">
                        {{~title~}}
                      </a>
                      {{~#is ../settings.promoted_article_style 'icon'}}
                        {{~#if promoted}}
                          <svg class="svg-icon ml-1 fill-current text-orange-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426 405" aria-hidden="true">
                            <title>{{t 'promoted'}}</title>
                            <use xlink:href="#icon-star" />
                          </svg>
                        {{/if~}}
                      {{/is~}}
                      {{~#if internal~}}
                        <svg class="svg-icon ml-1 fill-current text-base" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true">
                          <title>{{t 'internal'}}</title>
                          <use xlink:href="#icon-lock" />
                        </svg>
                      {{~/if~}}
                      {{~#isnt ../settings.article_list_excerpt 0}}
                        <p class="my-2 font-size-md break-words font-normal">
                          {{excerpt body characters=../settings.article_list_excerpt}}
                        </p>
                      {{/isnt~}}
                    </div>
                  </div>
                </li>
              {{/each~}}
            </ul>
          {{else}}

            {{! Custom article list micro-template }}
            <script type="text/javascript">
              ready(function() {
                new Navigation(document.getElementById('article-list-{{section.id}}'), {
                  collection: Theme.contentBlocks || {},
                  template: 'articles',
                  sectionId: {{section.id}},
                  templateData: {
                    sectionId: {{section.id}},
                    numberColumns: {{settings.article_list_columns}},
                    excerptLength: {{settings.article_list_excerpt}},
                    promotedArticleStyle: "{{settings.promoted_article_style}}"
                  }
                });
              });
            </script>
          {{/if}}
        </div>
      {{else}}
        {{#unless section.sections}}
          <p class="mt-5">
            <a href="{{section.url}}">
              {{t 'empty'}}
            </a>
          </p>
        {{/unless}}
      {{/if}}

      {{pagination "section.articles"}}

    </div>

    <aside class="lg:col-4{{~#is settings.section_sidebar 'none'}}{{~#isnt settings.cta_style 'sidebar'}} hidden{{else}}{{~#is settings.cta_location 'home'}} hidden{{/is~}}{{/isnt~}}{{/is~}}">

      {{! Sidebar navigation }}
      {{~#isnt settings.section_sidebar 'none'}}
        <div
          data-element="navigation"
          data-template="{{#is settings.section_sidebar 'custom'}}sidebar-navigation{{else}}{{settings.section_sidebar}}{{/is}}">
        </div>
      {{/isnt~}}

      {{! Call-to-action }}
      {{~#is settings.cta_style 'sidebar'}}
        {{~#isnt settings.cta_location 'home'}}
          <div
            data-element="template"
            data-template="call-to-action">
          </div>
        {{/isnt~}}
      {{/is~}}

    </aside>

  </div> {{! /.row }}
</div> {{! /#page-container }}

{{! Call-to-action }}
{{~#isnt settings.cta_style 'none'}}
  {{~#isnt settings.cta_style 'sidebar'}}
    {{~#isnt settings.cta_location 'home'}}
      <div
        data-element="template"
        data-template="call-to-action">
      </div>
    {{/isnt~}}
  {{/isnt~}}
{{/isnt~}}

<script type="text/javascript">document.documentElement.classList.add('section-page', 'section-' + {{section.id}})</script>
